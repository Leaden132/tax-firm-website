---
const currentPath = Astro.url.pathname;
const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/services/', label: 'Services' },
  { href: '/cross-border-tax/', label: 'Cross-Border Tax' },
  { href: '/bookkeeping/', label: 'Bookkeeping' },
  { href: '/about/', label: 'About' },
  { href: '/contact/', label: 'Contact' },
];
---
<header class="site-header">
  <div class="top-bar">
    <div class="container top-bar-inner">
      <div class="top-bar-contact">
        <a href="mailto:hills.tax@outlook.com">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
          hills.tax@outlook.com
        </a>
        <span class="divider"></span>
        <a href="tel:+1XXXXXXXXXX">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
          (XXX) XXX-XXXX
        </a>
      </div>
      <a href="/contact/" class="top-bar-cta">Book Free Consultation</a>
    </div>
  </div>
  <nav class="main-nav">
    <div class="container nav-inner">
      <a href="/" class="logo">
        <img src="/logo.png" alt="Hills Tax - Accounting, Bookkeeping & Cross-Border Tax Services" class="logo-img" />
      </a>
      <button class="mobile-toggle" aria-label="Toggle menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
      <ul class="nav-links">
        {navLinks.map(link => (
          <li>
            <a href={link.href} class={currentPath === link.href ? 'active' : ''}>
              {link.label}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </nav>
</header>
<style>
  .site-header { position: sticky; top: 0; z-index: 1000; }
  .top-bar {
    background: var(--olive-dark);
    color: var(--white);
    font-size: 0.85rem;
    padding: 0.5rem 0;
  }
  .top-bar-inner { display: flex; justify-content: space-between; align-items: center; }
  .top-bar-contact { display: flex; align-items: center; gap: 0.25rem; }
  .top-bar-contact a {
    color: rgba(255,255,255,0.8);
    transition: color var(--transition);
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
  }
  .top-bar-contact a:hover { color: var(--leaf-light); }
  .top-bar-contact svg { opacity: 0.7; }
  .top-bar-contact .divider {
    width: 1px;
    height: 14px;
    background: rgba(255,255,255,0.2);
    margin: 0 0.75rem;
  }
  .top-bar-cta {
    background: var(--leaf);
    color: var(--white);
    padding: 0.35rem 1.15rem;
    border-radius: 4px;
    font-weight: 600;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all var(--transition);
  }
  .top-bar-cta:hover { background: var(--leaf-light); }
  .main-nav {
    background: var(--white);
    padding: 0;
    box-shadow: 0 1px 12px rgba(42, 54, 14, 0.08);
    border-bottom: 1px solid var(--gray-200);
  }
  .nav-inner { display: flex; justify-content: space-between; align-items: center; height: 76px; }
  .logo { display: flex; align-items: center; }
  .logo-img { height: 48px; width: auto; }
  .nav-links { display: flex; list-style: none; gap: 0.15rem; }
  .nav-links a {
    color: var(--gray-800);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-size: 0.95rem;
    font-weight: 500;
    transition: all var(--transition);
    position: relative;
  }
  .nav-links a::after {
    content: '';
    position: absolute;
    bottom: 2px;
    left: 1rem;
    right: 1rem;
    height: 2px;
    background: var(--leaf);
    border-radius: 1px;
    transform: scaleX(0);
    transition: transform var(--transition);
  }
  .nav-links a:hover, .nav-links a.active { color: var(--olive); }
  .nav-links a:hover::after, .nav-links a.active::after { transform: scaleX(1); }
  .mobile-toggle { display: none; background: none; border: none; cursor: pointer; padding: 0.5rem; }
  .mobile-toggle span {
    display: block;
    width: 24px;
    height: 2px;
    background: var(--olive);
    margin: 5px 0;
    transition: var(--transition);
    border-radius: 1px;
  }
  @media (max-width: 768px) {
    .top-bar-cta { display: none; }
    .mobile-toggle { display: block; }
    .nav-links {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--white);
      flex-direction: column;
      padding: 1rem;
      box-shadow: 0 4px 16px rgba(42, 54, 14, 0.1);
      border-top: 1px solid var(--gray-200);
    }
    .nav-links.open { display: flex; }
    .nav-links a { padding: 0.75rem 1rem; }
    .nav-links a::after { display: none; }
    .logo-img { height: 40px; }
  }
</style>
<script>
  document.querySelector('.mobile-toggle')?.addEventListener('click', function() {
    const nav = document.querySelector('.nav-links');
    const expanded = this.getAttribute('aria-expanded') === 'true';
    nav?.classList.toggle('open');
    this.setAttribute('aria-expanded', String(!expanded));
  });
</script>
